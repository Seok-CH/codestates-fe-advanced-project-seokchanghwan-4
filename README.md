<img src='https://cdn.discordapp.com/attachments/1016940382061346880/1019400923870662756/news-newspaper-media-paper-press-article_108607.png' alt='' width='200'/>

# 기업과제(앨리스헬스케어) - 뉴스 웹앱

- **배포링크** : [링크클릭](https://codestates-fe-advanced-project-seokchanghwan-4.vercel.app/) (CORS 때문에 화면이 보이지 않습니다. local에서만 화면이 보입니다)
- **사용스택** : `javascript`, `react`, `typescript` ,`styled-components`,`react-icons`,`axios`
- **프로젝트 시작 방법** :

  1.  [Code버튼 클릭 > DownloadZip 클릭] 후 압축 파일 다운 받기
  2.  압축을 플고 소스코드에서 주어진 .env.example의 key에 알맞은 value넣기 > 파일명 .env.local로 교체
  3.  폴더 주소로 터미널에 `npm install && npm start` 입력

<br/>

## 기능 구현 리스트 및 GIF 이미지

- **메인페이지**

  - NEWS API의 top-headline api를 활용해서 현재 **가장 인기있는 뉴스**들을 보여주도록 하였습니다
  - 뉴스들은 카드형태이며 몇몇 뉴스들은 **크기를 다르게 만들었습니다**
  - **카테고리별**로 볼 수 있도록 카테고리 탭을 만들었습니다
  - **무한스크롤**을 활용해서 불필요한 리소스 로드를 없앴습니다
  - top-headline 뉴스를 클릭하면 실제 기사가 있는 **웹페이지로 이동**할 수 있습니다
  - 각 뉴스들은 **즐겨찾기 버튼**이 있고 즐겨찾기에 담을 수 있도록 구현하였습니다
    <details>
    <summary><strong>GIF이미지</strong></summary>
    <div markdown='1'>
    <img src='https://cdn.discordapp.com/attachments/1016940382061346880/1021326422230437898/Sep-19-2022_16-45-50.gif' alt='' />

    > 첫 번째 이미지: 메인페이지 레이아웃 및 카테고리 탭과 무한스크롤 기능을 확인할 수 있습니다

    <img src='https://cdn.discordapp.com/attachments/1016940382061346880/1019422120188575836/Sep-14-2022_10-37-46.gif' alt='' />

    > 두 번째 이미지: 뉴스 클릭시 실제 웹페이지로 이동하는 것을 확인할 수 있습니다

    <img src='https://cdn.discordapp.com/attachments/1016940382061346880/1021327201477599252/Sep-19-2022_16-49-19.gif' alt='' />

    > 세 번째 이미지: 즐겨찾기 기능을 확인할 수 있습니다

    </div>
    </details>

    <br/>

- **검색페이지**

  - 검색은 어느 페이지에서나 **헤더의 검색창에 검색어**를 입력하면 되도록 구현하였습니다
  - 검색 결과는 `관련도순`, `인기순`, `최신순`으로 정렬할 수 있습니다
  - **무한스크롤**을 활용해서 불필요한 리소스 로드를 없앴습니다
  - 뉴스를 클릭하면 실제 기사가 있는 **웹페이지로 이동**할 수 있습니다
  - 각 뉴스들은 **즐겨찾기 버튼**이 있고 즐겨찾기에 담을 수 있도록 구현하였습니다
    <details>
    <summary><strong>GIF이미지</strong></summary>
    <div markdown='1'>
    <img src='https://cdn.discordapp.com/attachments/1016940382061346880/1021327638184337408/Sep-19-2022_16-51-07.gif' alt='' />

    > 첫 번째 이미지: 검색어 입력 후 결과와 정렬 기능, 무한스크롤 기능을 확인할 수 있습니다

    <img src='https://cdn.discordapp.com/attachments/1016940382061346880/1019425620125548604/Sep-14-2022_10-52-57.gif' alt='' />

    > 두 번째 이미지: 뉴스 클릭시 실제 웹페이지로 이동하는 것을 확인할 수 있습니다

    <img src='https://cdn.discordapp.com/attachments/1016940382061346880/1019425759590367323/Sep-14-2022_10-53-38.gif' alt='' />

    > 세 번째 이미지: 즐겨찾기 기능을 확인할 수 있습니다

    </div>
    </details>

    <br/>

- **북마크페이지**

  - 북마크한 리스트를 확인할 수 있습니다
  - 북마크한 리스트는 **localStorage**에 저장되어 웹페이지를 재접속하여도 유지 됩니다
  - 북마크 상세 아이콘을 클릭하면 **북마크의 기사 내용을 수정**할 수 있으며 삭제도 가능합니다
    <details>
    <summary><strong>GIF이미지</strong></summary>
    <div markdown='1'>
    <img src='https://cdn.discordapp.com/attachments/1016940382061346880/1019425759590367323/Sep-14-2022_10-53-38.gif' alt='' />

    > 첫 번째 이미지: 북마크 리스트와 북마크 기사 수정, 삭제 기능을 확인할 수 있습니다

    <img src='https://cdn.discordapp.com/attachments/1016940382061346880/1019427546191900782/Sep-14-2022_10-57-17.gif' alt='' />

    > 두 번째 이미지: 웹페이지를 재접속해도 북마크 리스트가 남아있는 것을 확인할 수 있습니다

    </div>
    </details>

    <br/>

- **로그인,로그아웃**

  - 로그인은 상단 헤더에서 로그인 버튼을 누른 후 나오는 **모달**에 정보를 입력하는 과정으로 구성하였습니다
  - 로그인 실패 시 **실패 메시지**가 뜨도록 하였습니다
  - 로그인 성공시 로그인 버튼 대신 **북마크 목록 버튼과 로그아웃 버튼**이 나타나도록 하였습니다
  - 로그아웃 버튼을 클릭해서 **로그아웃**을 할 수 있습니다
  - 로그인 이전에는 **북마크 버튼 클릭 시 바로 모달이 떠서 로그인 하도록 유도**를 하였습니다
  - 로그인 이전에는 주소창에 `/bookmark`를 입력해도 바로 **메인페이지로 리다이렉트** 하도록 하였습니다
    <details>
    <summary><strong>GIF이미지</strong></summary>
    <div markdown='1'>
    <img src='https://cdn.discordapp.com/attachments/1016940382061346880/1019430759121027112/Sep-14-2022_11-13-21.gif' alt='' />

    > 첫 번째 이미지: 로그인 과정과 로그인 실패시 실패 메시지를 확인할 수 있습니다

    <img src='https://cdn.discordapp.com/attachments/1016940382061346880/1019430709158486016/Sep-14-2022_11-13-03.gif' alt='' />
     
    > 두 번째 이미지: 로그인 이전에 일부 기능을 막아놓은 것을 확인할 수 있습니다

    </div>
    </details>
    <br/>

## 주요 기능 구현 방법

- **메인 페이지**

  - 메인페이지 뉴스들은 API의 `top-headline` endpoint를 사용했습니다

  - 메인페이지의 카테고리는 `top-headline` api의 `category`쿼리를 사용하여 구현하였습니다
  - 메인페이지의 크기가 다른 카드들의 레이아웃은 `grid`를 활용하여 구현했습니다

- **검색 페이지**

  - 검색 페이지는 API의 `everything` endpoint를 사용하여 검색어를 넘겨 결과를 받아서 렌더링하게끔 구현했습니다

  - 정렬을 정렬쿼리를 요청시 함께 넘겨서 새로운 결과물을 화면에 보여주는 식으로 구현했습니다

- **무한 스크롤**

  - [Intersection Observer API](https://developer.mozilla.org/ko/docs/Web/API/Intersection_Observer_API)를 활용하여 무한 스크롤 컴포넌트가 화면에 보이면 다음 뉴스들을 fetch해오는 방식으로 구현했습니다

- **북마크**

  - 북마크는 뉴스의 북마크 버튼을 클릭하면 `localStorage`의 `bookmark키`의 배열에 뉴스 정보가 담긴 객체를 추가하도록 구현하였습니다

  - 북마크 페이지들어갈때 초기값은 로컬스토리지 값으로 맞추었기 때문에 페이지를 새로고침하거나 다시 들어갔다 나와도 북마크가 유지 되도록 하였습니다
  - 북마크 수정과 삭제는 기사 정보의 특별한 id값이 없었기 때문에 배열의 인덱스 값을 활용하여 배열안의 특정한 기사를 찾아 수정과 삭제를 하도록 구현하였습니다

- **로그인**

  - 로그인도 `localStorage`의 `account키`에 계정 정보를 저장해놓았고 로그인시 이 정보와 일치하면 로그인 되도록 구현했습니다
  - 로그인 상태는 나갔다 들어와도 유지되어야 하기 때문에 localStorage에 isLogin 정보를 저장하여 나갔다 들어왔을 때 로그인 상태가 isLogin을 따라가도록 하였습니다

<br/>

## 구현하면서 어려웠던 점

- **무한스크롤**

  - 이번 프로젝트에서는 무한스크롤을 이용하는 곳이 메인페이지와 검색페이지 두 곳인데 두 곳에서 같이쓰고자 무한스크롤을 따로 컴포넌트화 해서 분리했었습니다. 그리고 무한스크롤시 실행할 함수를 넘겨주도록했는데 이 함수가 `useEffect`의 의존성 배열에 넣으면 호출히 무한히 일어나는 현상이 있었습니다. 이를 방지하기 위해 `useCallback`을 사용하는 등 다양한 방법을 시도해 보았지만 잘 되지 않아 함수를 넘겨주는 대신 `type`을 넘겨주어서 type에 따라 컴포넌트에 미리 있던 함수를 실행시키도록 하였습니다

  - 무한 스크롤 실행범위를 정하는 것이 어려웠습니다. 검색 페이지의 경우 `list` 변수에 결과를 담아서 렌더링 하는데 검색 페이지 처음에 들어왔을 때는 `list.length === 0`이기 때문에 무한스크롤 컴포넌트가 먼저 일단 화면에 보이고 시작하기 때문에 `intersection observer`가 발동해서 처음에 10개 기사를 가져와야하는데 20개를 가져오는 버그가 있었습니다. 이를 해결하기 위해서 `list.length !==0`일때만 무한스크롤 컴포넌트를 조건부 렌더링을 하여 버그를 해결했습니다

- **메인 페이지 Grid 레이아웃**

  - 메인페이지의 다양한 크기의 카드들을 올바르게 배치하도록 `grid` 레이아웃을 활용하였는데 레이아웃 배치시에 빈틈없이 채우는 방법을 찾기 위해서 grid에 대해 많이 공부를 하였고 grid안에 내장된 ` grid-auto-flow: dense`를 사용하여 빈틈없이 카드들을 채울수 있었습니다.

- **타입스크립트 활용**

  - 타입스크립트 자체를 프로젝트에 적용한 것이 이번 코스에서 처음이고 블로그를 많이 찾아보면서 적용을 해보았지만 아직 에러가 날때만 타입을 적용만 해오고 있어서 타입스크립트를 활용하여 에러와 버그가 없고 생산성있는 시스템을 만들지는 못하였습니다.

  - 타입스크립트에서 `Redux Toolkit`을 사용하기 위해 toolkit의 type에 대해 공부하는데 많은 시간이 걸렸습니다
